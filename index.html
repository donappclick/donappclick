<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supermercado</title>
    <style>
        /* Estilos generales */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        h1, h2, p {
            margin: 0;
        }

        /* Contenedor principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Título */
        header {
            text-align: center;
            padding: 40px 20px;
            background-color: #2c3e50;
            color: white;
        }

        header h1 {
            font-size: clamp(2rem, 5vw, 4rem);
        }

        /* Campo de búsqueda */
        .buscador {
            text-align: center;
            margin: 20px 0;
        }

        .buscador input {
            padding: 10px;
            font-size: 1rem;
            width: 80%;
            max-width: 400px;
            border: 2px solid #ccc;
            border-radius: 5px;
        }

        /* Grid de productos */
        .productos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .producto {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .producto:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .producto img {
            width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .producto h2 {
            font-size: clamp(1.5rem, 4vw, 2rem);
            margin: 10px 0;
        }

        .producto p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            color: #555;
        }

        .producto .precio {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            font-weight: bold;
            color: #e74c3c;
            margin-top: 10px;
        }

        /* Footer */
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px 0;
            position: relative;
            margin-top: auto;
            width: 100%;
        }

        footer p {
            font-size: 1rem;
        }

        /* Paginación */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .pagination button {
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            background-color: #3498db;
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .pagination button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>

    <header>
        <h1>Supermercado Online</h1>
        <p>Los mejores productos al mejor precio</p>
    </header>

    <div class="container">
        <!-- Buscador -->
        <div class="buscador">
            <input type="text" id="searchInput" placeholder="Buscar productos..." onkeyup="filtrarProductos()">
        </div>

        <div id="productos" class="productos">
            <!-- Los productos se cargarán aquí dinámicamente -->
        </div>

        <!-- Paginación -->
        <div class="pagination" id="pagination">
            <!-- Los botones de paginación se cargarán aquí -->
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Supermercado Online. Todos los derechos reservados.</p>
    </footer>

    <script>
        let productos = [];
        let productosFiltrados = [];
        let productosPorPagina = 10; // Máximo 10 productos por página
        let paginaActual = 1;

        // Función para cargar los productos
        window.onload = async function() {
            const url = "https://api.allorigins.win/raw?url=https://script.google.com/macros/s/AKfycbzlyIHe_OHMxQg48et57ZJU32ZzCw_y_hpRW3vC3CNQ6W51x0Vu9LXPXV4zvT8COPiFgA/exec"; 
            
            try {
                let respuesta = await fetch(url);

                if (!respuesta.ok) {
                    throw new Error(`Error en la respuesta del servidor: ${respuesta.statusText}`);
                }

                productos = await respuesta.json(); // Guardamos los productos en la variable global
                productosFiltrados = productos; // Inicialmente, los productos filtrados son todos los productos

                if (productos.length === 0) {
                    document.getElementById("productos").innerHTML = "No hay productos disponibles.";
                    return;
                }

                mostrarProductos(); // Mostrar los productos de la primera página
                crearPaginacion(); // Crear los botones de paginación
            } catch (error) {
                console.error("Error cargando productos:", error);
                document.getElementById("productos").innerHTML = `Error al cargar los productos: ${error.message}`;
            }
        }

        // Función para mostrar los productos de una página
        function mostrarProductos() {
            let inicio = (paginaActual - 1) * productosPorPagina;
            let fin = paginaActual * productosPorPagina;
            let productosPaginados = productosFiltrados.slice(inicio, fin);

            let html = "";
            productosPaginados.forEach(prod => {
                let imagen = prod.imagen ? prod.imagen : "https://via.placeholder.com/250"; 
                html += `<div class="producto">
                    <img src="${imagen}" alt="${prod.nombre}">
                    <h2>${prod.nombre}</h2>
                    <p>${prod.descripcion}</p>
                    <div class="precio">${prod.precio}</div>
                </div>`;
            });

            document.getElementById("productos").innerHTML = html;
        }

        // Función para crear los botones de paginación
        function crearPaginacion() {
            let totalPaginas = Math.ceil(productosFiltrados.length / productosPorPagina);
            let html = "";

            for (let i = 1; i <= totalPaginas; i++) {
                html += `<button onclick="cambiarPagina(${i})">${i}</button>`;
            }

            document.getElementById("pagination").innerHTML = html;
        }

        // Función para cambiar de página
        function cambiarPagina(pagina) {
            paginaActual = pagina;
            mostrarProductos();
        }

        // Función para filtrar los productos
        function filtrarProductos() {
            let query = document.getElementById('searchInput').value.toLowerCase();
            productosFiltrados = productos.filter(prod => 
                prod.nombre.toLowerCase().includes(query) || 
                prod.descripcion.toLowerCase().includes(query)
            );
            paginaActual = 1; // Volver a la primera página después de realizar la búsqueda
            mostrarProductos();
            crearPaginacion();
        }
    </script>

</body>
</html>
